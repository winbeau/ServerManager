# ServerManager 项目总结

## 📋 项目概述
**ServerManager** 是一个基于 Qt 6 开发的服务器资源管理和任务调度系统,提供可视化的服务器监控、任务分配和资源管理功能。

## 🎯 核心功能

### 1. **服务器管理**
- 服务器信息添加和存储
- 服务器状态实时监控
- 多服务器资源统一管理

### 2. **任务调度系统**
- 智能任务分配算法
- 基于优先队列的任务调度
- 任务状态跟踪(待执行/进行中/已完成/失败)

### 3. **资源监控仪表盘**
- **CPU/GPU/内存实时监控**:使用 Qt Charts 可视化展示
- **任务分布饼图**:展示任务执行状态统计
- **资源使用率图表**:内存和 GPU 占用情况

### 4. **数据模拟功能**
- 随机生成服务器数据
- 批量生成测试任务
- 用于系统测试和演示

## 🏗️ 系统架构

### 技术栈
```
语言: C++17
框架: Qt 6.5.3
构建: CMake
数据库: Qt SQL (SQLite)
图表: Qt Charts
网络: Qt Network
```

### 模块架构

```
ServerManager/
├── 主窗口 (mainwindow)          # 系统导航中心
│   ├── 服务器列表展示
│   ├── 数据库连接管理
│   └── 窗口调度控制
│
├── 添加窗口 (addwindow)         # 服务器信息录入
│   ├── 服务器配置表单
│   └── 数据验证和存储
│
├── 仪表盘窗口 (boardwindow)     # 核心调度监控模块
│   ├── 任务调度引擎
│   │   ├── 优先队列调度算法
│   │   ├── 服务器负载均衡
│   │   └── 任务失败重试机制
│   ├── 实时数据更新 (500ms/2000ms定时器)
│   └── 资源可视化 (饼图/柱状图)
│
└── 模拟窗口 (imitatewindow)     # 数据生成工具
    ├── 随机服务器生成器
    └── 随机任务生成器
```

### 核心数据结构

**Server 结构体**:
- 服务器 ID、IP、端口
- 总资源量: CPU/GPU/磁盘/带宽
- 空闲资源: 动态资源管理
- 任务队列: 优先队列(按执行时长排序)

**Task 结构体**:
- 任务 ID
- 资源需求: CPU/GPU/磁盘/带宽
- 时间参数: 开始时间/持续时间
- 任务状态: 待执行/执行中/完成/失败

### 调度算法特点

1. **优先队列管理**:
   - `todoTasks`: 按开始时间排序(最早优先)
   - `Server.tasks`: 按执行时长排序(短任务优先)

2. **资源管理策略**:
   - 80% 资源上限保护 (`CEIL = 0.8`)
   - 98-100% 可用率模拟 (`AVAIL`)
   - 动态资源分配和回收

3. **实时更新机制**:
   - 500ms 定时器: 快速状态刷新
   - 2000ms 定时器: 图表数据更新

## 💾 数据持久化
- 使用 Qt SQL 模块
- SQLite 数据库存储
- 两张核心表: 服务器表、任务表

## 🎨 用户界面
- 基于 `.ui` 文件的可视化设计
- QSS 样式表自定义外观 (`resources/style.qss`)
- 自定义表格样式 (`MyTableStyle` 代理)
- 进度条可视化资源使用率

## 🔧 构建系统
- CMake 自动化构建
- MOC/UIC/RCC 自动处理
- Qt 依赖库自动部署
- 跨平台插件复制(Windows)

## 📊 可视化组件
使用 **Qt Charts** 实现:
- 任务状态饼图 (taskChart)
- 内存使用饼图 (memoChart)
- GPU 使用饼图 (gpuChart)

## 🚀 特色亮点
1. **智能调度**: 基于优先队列的高效任务分配
2. **实时监控**: 毫秒级资源状态更新
3. **模拟测试**: 内置数据生成器便于开发调试
4. **可视化**: 丰富的图表展示资源状态
5. **模块化**: 清晰的窗口分离和职责划分

## 📁 项目结构
```
ServerManager/
├── CMakeLists.txt              # CMake 构建配置
├── README.md                   # 项目说明文档
├── src/                        # 源代码目录
│   ├── main.cpp                # 程序入口
│   ├── mainwindow.{h,cpp,ui}   # 主窗口
│   ├── addwindow.{h,cpp,ui}    # 添加窗口
│   ├── boardwindow.{h,cpp,ui}  # 仪表盘窗口
│   └── imitatewindow.{h,cpp,ui}# 模拟窗口
├── resources/                  # 资源文件
│   ├── style.qss               # 样式表
│   └── resources.qrc           # Qt 资源文件
└── icons/                      # 图标资源
```

## 🎓 应用场景
- 服务器集群监控与管理
- 任务调度系统仿真
- 资源分配算法验证
- 分布式计算资源管理
- 教学演示和原型开发

---

**许可证**: MIT License
**开发环境**: Qt 6.5.3 + CMake + C++17
